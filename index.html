<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Generador de Post</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; display: flex; gap: 30px; }
    form, #preview { width: 45%; }
    input, select, textarea { width: 100%; margin-bottom: 10px; padding: 8px; }
    label { font-weight: bold; margin-top: 10px; display: block; }
    #preview { border: 1px solid #ccc; padding: 15px; overflow-y: auto; max-height: 90vh; background: #f9f9f9; }
    .multiselect { height: 100px; }
    button { padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>

<form id="postForm">
  <label>Buscar película:</label>
  <input type="text" id="searchMovie" placeholder="Ej: George de la Selva">

  <button type="button" onclick="searchMovie()">Buscar</button>

  <div id="movieInfo"></div>

  <label>Audios:</label>
  <select id="audios" multiple class="multiselect">
    <option>Latino E-AC3 5.1</option>
    <option>Latino AC3 5.1</option>
    <option>Inglés E-AC3 5.1</option>
    <option>Inglés AC3 5.1</option>
    <option>Español España AC3 5.1</option>
  </select>

  <label>Subtítulos:</label>
  <input type="text" id="subtitulos" placeholder="Ej: Español Latino">

  <label>Calidades:</label>
  <select id="calidades" multiple class="multiselect">
    <option>480p</option>
    <option>720p</option>
    <option>1080p</option>
    <option>2160p</option>
  </select>

  <label>Formato:</label>
  <select id="formato">
    <option>MKV</option>
    <option>MP4</option>
    <option>AVI</option>
  </select>

  <label>Códec:</label>
  <select id="codec">
    <option>H.264</option>
    <option>H.265 (HEVC)</option>
    <option>VP9</option>
  </select>

  <label>Tamaño (GB):</label>
  <input type="text" id="tamano" placeholder="Ej: 2.87">

  <label>Links de descarga:</label>
  <textarea id="links" placeholder="Ej:\nMEGA: https://...\nTERABOX: https://..."></textarea>

  <label>Capturas (URLs separadas por salto de línea):</label>
  <textarea id="capturas" placeholder="URL de imagen 1\nURL de imagen 2\nURL de imagen 3"></textarea>

  <button type="button" onclick="generatePost()">Generar Post</button>
</form>

<div id="preview"></div>

<script>
const API_KEY = 'e729363acbddf1091e6f7de1ecbc1dc9';
let movieData = {};

async function searchMovie() {
  const query = document.getElementById('searchMovie').value;
  const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}&language=es-ES`);
  const data = await response.json();

  if (data.results.length > 0) {
    const movie = data.results[0];
    movieData = movie;

    document.getElementById('movieInfo').innerHTML = `
      <p><b>Título original:</b> ${movie.original_title}</p>
      <p><b>Año:</b> ${movie.release_date ? movie.release_date.split('-')[0] : 'Desconocido'}</p>
      <p><b>Sinopsis:</b> ${movie.overview}</p>
      <img src="https://image.tmdb.org/t/p/original${movie.poster_path}" style="width:100%; max-height:300px; object-fit:cover;">
    `;
  } else {
    document.getElementById('movieInfo').innerHTML = '<p>No se encontró la película</p>';
  }
}

function generatePost() {
  const audios = Array.from(document.getElementById('audios').selectedOptions).map(option => option.value).join(' – ');
  const subtitulos = document.getElementById('subtitulos').value;
  const calidades = Array.from(document.getElementById('calidades').selectedOptions).map(option => option.value);
  const formato = document.getElementById('formato').value;
  const codec = document.getElementById('codec').value;
  const tamano = document.getElementById('tamano').value;
  const links = document.getElementById('links').value;
  const capturas = document.getElementById('capturas').value.split('\n');

  let calidadTexto = calidades.map(c => `[b]Calidad:[/b] ${c}\n[b]Resolución:[/b] ${getResolution(c)}`).join('\n\n');

  let capturasTexto = capturas.map(url => `[center][img]${url}[/img][/center]`).join('\n\n');

  const post = `
[center][b]${movieData.title} (${movieData.release_date.split('-')[0]})[/b][/center]

[center]Una presentación de calidad por [b]YeiEi[/b][/center]

[center][img]https://www.identi.io/imgpost/Separadori.png[/img][/center]

[center][img]https://image.tmdb.org/t/p/original${movieData.poster_path}[/img][/center]

[center][img]https://www.identi.io/imgpost/info1.png[/img][/center]

[center]
[b]Sinopsis:[/b]
[i]${movieData.overview}[/i]
[/center]

[hr]

[b]Título original:[/b] ${movieData.original_title}
[b]Año:[/b] ${movieData.release_date.split('-')[0]}
[b]Duración:[/b] -- Min
[b]País:[/b] --

[hr]

[b]Audios:[/b] ${audios}
[b]Subtítulos:[/b] ${subtitulos}
${calidadTexto}
[b]Formato:[/b] ${formato}
[b]Tamaño:[/b] ${tamano} Gb
[b]Códec:[/b] ${codec}

${capturasTexto}

[center][img]https://www.identi.io/imgpost/links1.png[/img][/center]

[center][b]ENLACES DE DESCARGA:[/b][/center]

[center][links]
${links}
[/links][/center]

[center][img]https://www.identi.io/imgpost/Separadori.png[/img][/center]

[center][b]Publicación creada con estilo por YeiEi – ¡Disfrútala![/b][/center]
`;

  document.getElementById('preview').innerText = post;
}

function getResolution(calidad) {
  switch(calidad) {
    case '480p': return '720×480';
    case '720p': return '1280×720';
    case '1080p': return '1920×1080';
    case '2160p': return '3840×2160';
    default: return '';
  }
}
</script>

</body>
</html>
